<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공기청정기 그래프</title>
    <link rel="stylesheet" href="{{url_for('static',filename='index.css')}}">
    
</head>
<body>
  <div class="content">
    <nav role="navigation">
      <a href="{{ url_for('index') }}" class="logo"><div class="logo-box"><h1>공기청정기</h1></div></a>

      <div id="menuToggle">
        <input type="checkbox" />
          <span></span>
          <span></span>
          <span></span>
        <ul id="menu">
          <li><a href="{{ url_for('index') }}">정보</a></li>
          <li><a href="{{ url_for('graph') }}">그래프</a></li>
          <li><a href="#">Info</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
    
    </nav>
  </div>

  <main class="main-content">
    


    <div style="margin: 15px 15px;"><canvas id="hours_graph" width="300" height="300"></canvas></div>
    <div style="margin: 15px 15px;"><canvas id="days_graph" width="300" height="300"></canvas></div>

  </main>



  <script src="{{url_for('static', filename = 'jquery.min.js')}}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js" integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw==" crossorigin="anonymous"></script>
  <script>
    $.ajax({
    method : "GET",
    url    : '/hours_graph',
    dataType: "json",
    
    success: function(data){
      new Chart(document.getElementById("hours_graph"), {
        type: 'line',
        data: { labels   : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],
                datasets : [{
                  label: 'PM1.0',
                  data: Object.values(data.pm1),
                  fill : false,
                  borderColor : 'rgba(10, 190, 214, 0.5)',
                  backgroundColor : 'rgba(10, 190, 214, 0.5)'
              },{
                label: 'PM2.5',
                data: Object.values(data.pm25),
                fill : false,
                borderColor : 'rgba(223, 239, 11, 0.5)',
                backgroundColor : 'rgba(223, 239, 11, 0.5)'
              },{
                label: 'PM10',
                data: Object.values(data.pm10),
                fill : false,
                borderColor : 'rgba(63, 246, 60, 0.5)',
                backgroundColor : 'rgba(63, 246, 60, 0.5)'
              }]
        },
        options : {
          title : {
            display : true,
            text    : "최근 24시간",
            fontSize : 20 },
          scales: {
            xAxes: [{
              scaleLabel: {
                display: true,
                labelString: '시간전',
                fontSize : 15
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'μg/m³',
                fontSize : 15
              }
            }]
        }
        } } ); },
    
    error: function(error_data){
        console.log("error")
        console.log(error_data) } 
  } )
  
    $.ajax({
    method : "GET",
    url    : '/days_graph',
    dataType: "json",
    
    success: function(data){
      new Chart(document.getElementById("days_graph"), {
        type: 'line',
        data: { labels   : ["오늘",1,2,3,4,5,6,7],
                datasets : [{
                  label: 'PM1.0',
                  data: Object.values(data.pm1),
                  fill : false,
                  borderColor : 'rgba(10, 190, 214, 0.5)',
                  backgroundColor : 'rgba(10, 190, 214, 0.5)'
              },{
                label: 'PM2.5',
                data: Object.values(data.pm25),
                fill : false,
                borderColor : 'rgba(223, 239, 11, 0.5)',
                backgroundColor : 'rgba(223, 239, 11, 0.5)'
              },{
                label: 'PM10',
                data: Object.values(data.pm10),
                fill : false,
                borderColor : 'rgba(63, 246, 60, 0.5)',
                backgroundColor : 'rgba(63, 246, 60, 0.5)'
              }]
        },
        options : {
          title : {
            display : true,
            text    : "최근 일주일",
            fontSize : 20
          },
            scales: {
              xAxes: [{
                scaleLabel: {
                  display: true,
                  labelString: '일전',
                  fontSize : 15
                }
              }],
              yAxes: [{
                scaleLabel: {
                  display: true,
                  labelString: 'μg/m³',
                  fontSize : 15
                }
              }]
            }
        } } ); },
    
    error: function(error_data){
        console.log("error")
        console.log(error_data) } 
  } )

    </script>
</body>
</html>